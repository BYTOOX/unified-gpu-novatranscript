# =============================================================================
# Remote Processing Service - Dépendances Python
# Optimisé pour AMD ROCm 7.1.1 + Strix Halo (gfx1151)
# =============================================================================

# FastAPI et serveur
fastapi
uvicorn[standard]
python-multipart

# Transformers pour Whisper
transformers>=4.39.0
accelerate

# Pyannote pour la diarization
# NOTE: pyannote.audio installe automatiquement ses dépendances
# torch/torchaudio sont exclus car installés via wheels ROCm (voir start-server.sh)
pyannote.audio>=3.3.1,<4.0.0

# Audio processing
librosa
soundfile

# =============================================================================
# PyTorch ROCm 7.1.1 - INSTALLÉ AUTOMATIQUEMENT par start-server.sh
# =============================================================================
# Les wheels sont téléchargés depuis:
# https://repo.radeon.com/rocm/manylinux/rocm-rel-7.1.1/
#
# Versions installées:
# - torch==2.9.1+rocm7.1.1
# - torchaudio==2.9.0+rocm7.1.1
# - torchvision==0.24.0+rocm7.1.1
# - triton==3.5.1+rocm7.1.1
#
# NE PAS installer torch/torchaudio/torchvision via pip standard !
# Cela écraserait les wheels ROCm avec les versions CUDA.
# =============================================================================

# =============================================================================
# VAD (Voice Activity Detection)
# =============================================================================
# silero-vad est installé automatiquement via start-server.sh --setup
# ONNX Runtime MIGraphX est téléchargé depuis:
# https://repo.radeon.com/rocm/manylinux/rocm-rel-7.1.1/onnxruntime_migraphx-1.23.1-cp312-cp312-manylinux_2_27_x86_64.manylinux_2_28_x86_64.whl
